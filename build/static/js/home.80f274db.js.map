{"version":3,"sources":["Assets/images/default.jpg","Pages/Home/topicInfo.js","Pages/Home/nav.js","Pages/Home/index.js"],"names":["module","exports","topicInfo_TopicInfo","state","getPlaceHolder","react_default","a","createElement","src","default_default","alt","topicInfo","this","props","distanceDate","distance_in_words_to_now_default","Date","create_at","locale","zh_cn_default","className","top","good","Link","to","concat","author","loginname","format_default","id","title","visit_count","reply_count","react_lazyload_lib_default","height","placeholder","avatar_url","react","nav_Nav","Object","index_module","stores","userInfo","loginStore","accessToken","checkAccessToken","withRouter","navList","key","desc","path","isActive","_this$state","style","fontSize","map","item","backgroundImage","nextProps","match","params","Home_Home","homeStore","Home","_this","classCallCheck_default","possibleConstructorReturn_default","getPrototypeOf_default","call","getTopicList","isReset","arguments","length","undefined","page","tab","limit","prevProps","clearTopicList","_this2","topicList","lib_default","showLoadingAnimation","type","ready","color","rows","scroller_default","loadNext","pageStart","hasMore"],"mappings":"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","file":"static/js/home.80f274db.js","sourcesContent":["module.exports = \"data:image/jpeg;base64,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\"","import React, { PureComponent } from 'react';\nimport PropTypes from 'prop-types';\nimport { Link } from 'react-router-dom';\nimport dateFormat from 'date-fns/format/index';\nimport distanceInWordsToNow from 'date-fns/distance_in_words_to_now/index';\nimport zhLocale from 'date-fns/locale/zh_cn/index';\nimport LazyLoad from 'react-lazyload';\nimport defaultAvatar from '../../Assets/images/default.jpg';\n\nexport default class TopicInfo extends PureComponent {\n  static propTypes = {\n    topicInfo: PropTypes.oneOfType([PropTypes.object]).isRequired,\n  }\n  state = {}\n  getPlaceHolder = () => <img src={defaultAvatar} alt=\"\" />\n  render() {\n    const topicInfo = this.props.topicInfo;\n    const distanceDate = distanceInWordsToNow(new Date(topicInfo.create_at), { locale: zhLocale });\n    return (\n      <div className=\"home__box flex\">\n        <div className=\"home__box__left flex-1\">\n          <div className=\"home__box__meta\">\n            {\n              topicInfo.top ? (\n                <span className=\"home__box__meta--info home__box__meta--top middle-dot\">置顶</span>\n              ) : null\n            }\n            {\n              topicInfo.good ? (\n                <span className=\"home__box__meta--info home__box__meta--top middle-dot\">精华</span>\n              ) : null\n            }\n            <Link\n              to={`/user/${topicInfo.author.loginname}`}\n              className=\"home__box__meta--info middle-dot\"\n            >\n              {topicInfo.author.loginname}\n            </Link>\n            <span className=\"home__box__meta--info middle-dot\">{dateFormat(topicInfo.create_at, 'YYYY-MM-DD HH:mm')}</span>\n            <span className=\"home__box__meta--info middle-dot\">{distanceDate}前</span>\n          </div>\n          <Link to={`/topic/${topicInfo.id}`} className=\"home__box--title\">{topicInfo.title}</Link>\n          <div className=\"home__box__action\">\n            <span className=\"home__box__action--box\">\n              访问数: {topicInfo.visit_count}\n            </span>\n            <span className=\"home__box__action--box\">\n              评论数: {topicInfo.reply_count}\n            </span>\n          </div>\n        </div>\n        <Link\n          to={`/user/${topicInfo.author.loginname}`}\n          className=\"home__box__right\"\n        >\n          <LazyLoad\n            height=\"5rem\"\n            placeholder={this.getPlaceHolder()}\n          >\n            <img\n              src={topicInfo.author.avatar_url}\n              alt=\"\"\n            />\n          </LazyLoad>\n        </Link>\n      </div>\n    );\n  }\n}\n","import React, { Component } from 'react';\nimport { Link, withRouter } from 'react-router-dom';\nimport { observer, inject, PropTypes as MobxPropTypes } from 'mobx-react';\nimport PropTypes from 'prop-types';\n\n@withRouter\n@inject(stores => ({\n  userInfo: stores.loginStore.userInfo,\n  accessToken: stores.loginStore.accessToken,\n  checkAccessToken: stores.loginStore.checkAccessToken,\n}))\n@observer\nexport default class Nav extends Component {\n  static propTypes = {\n    userInfo: MobxPropTypes.observableObject.isRequired,\n    accessToken: PropTypes.string.isRequired,\n    checkAccessToken: PropTypes.func.isRequired,\n  }\n  static getDerivedStateFromProps(nextProps) {\n    return {\n      isActive: !nextProps.match.params.id ? 'all' : nextProps.match.params.id,\n    };\n  }\n  state = {\n    navList: [{\n      key: 'all',\n      desc: '全部',\n      path: '',\n    }, {\n      key: 'good',\n      desc: '精华',\n      path: '/good',\n    }, {\n      key: 'share',\n      desc: '分享',\n      path: '/share',\n    }, {\n      key: 'ask',\n      desc: '问答',\n      path: '/ask',\n    }, {\n      key: 'job',\n      desc: '招聘',\n      path: '/job',\n    }],\n    isActive: 'all',\n  }\n  componentDidMount() {\n    if (this.props.accessToken) {\n      this.props.checkAccessToken(this.props.accessToken, true);\n    }\n  }\n  render() {\n    const {\n      navList,\n      isActive,\n    } = this.state;\n    const userInfo = this.props.userInfo;\n    return (\n      <nav className=\"home__nav flex\">\n        <ul className=\"home__nav__list\">\n          <li className=\"home__nav__item\" style={{ fontSize: '1.5rem' }}>CNODE</li>\n          {\n            navList.map(item => (\n              <li\n                key={item.key}\n                className={isActive === item.key ? 'home__nav__item active' : 'home__nav__item'}\n              >\n                <Link to={`/theme${item.path}`} >{item.desc}</Link>\n              </li>\n            ))\n          }\n        </ul>\n        <Link\n          to={userInfo.loginname ? `/user/${userInfo.loginname}` : '/login'}\n          className=\"home__user flex flex-v-c flex-h-end\"\n        >\n          <div\n            className=\"home__user__avatar\"\n            style={{\n              backgroundImage: `url(${userInfo.avatar_url})`\n            }}\n          />\n          <span className=\"home__user__name ellipsis\" title={userInfo.loginname || '登录'}>{userInfo.loginname || '登录'}</span>\n        </Link>\n      </nav>\n    );\n  }\n}\n","import React, { Component } from 'react';\nimport { observer, inject, PropTypes } from 'mobx-react';\nimport LimitedInfiniteScroll from 'react-limited-infinite-scroll';\nimport ReactPlaceholder from 'react-placeholder';\nimport 'react-placeholder/lib/reactPlaceholder.css';\nimport TopicInfo from './topicInfo';\nimport Nav from './nav';\nimport './index.less';\n\n@inject(stores => ({\n  homeStore: stores.homeStore,\n}))\n@observer\nexport default class Home extends Component {\n  static propTypes = {\n    homeStore: PropTypes.observableObject.isRequired,\n    match: PropTypes.objectOrObservableObject.isRequired,\n  }\n  constructor(props) {\n    super(props);\n    this.state = {};\n    this.page = 1;\n    this.tab = this.props.match.params.id;\n    this.limit = 20;\n  }\n  componentDidMount() {\n    this.getTopicList();\n  }\n  componentDidUpdate(prevProps) {\n    if (prevProps.match.params.id !== this.props.match.params.id) {\n      this.props.homeStore.clearTopicList();\n      this.page = 1;\n      this.tab = this.props.match.params.id;\n      this.getTopicList(true);\n    }\n  }\n  componentWillUnmount() {\n    this.props.homeStore.clearTopicList();\n  }\n  getTopicList = (isReset = false) => {\n    this.props.homeStore.getTopicList({\n      page: this.page,\n      tab: this.tab,\n      limit: this.limit,\n    }, isReset);\n    this.page += 1;\n  }\n  render() {\n    const topicList = this.props.homeStore.topicList;\n    return (\n      <div className=\"home\">\n        <Nav />\n        <div className=\"home__container\">\n          <ReactPlaceholder\n            showLoadingAnimation\n            type=\"media\"\n            ready={topicList.length > 0}\n            color=\"#fbfbfb\"\n            rows={4}\n          >\n            <LimitedInfiniteScroll\n              loadNext={() => this.getTopicList()}\n              pageStart={1}\n              limit={15}\n              hasMore={(this.page - 1) * this.limit === topicList.length}\n            >\n              {\n                topicList.map(item => (\n                  <TopicInfo\n                    key={item.id}\n                    topicInfo={item}\n                  />\n                ))\n              }\n            </LimitedInfiniteScroll>\n          </ReactPlaceholder>\n        </div>\n      </div>\n    );\n  }\n}\n\n"],"sourceRoot":""}