{"version":3,"sources":["Pages/Write/index.js"],"names":["Write","Object","mobx_react__WEBPACK_IMPORTED_MODULE_8__","stores","accessToken","loginStore","state","tabList","id","desc","tab","title","content","tabHandler","e","_this","setState","target","value","titleHandler","contentHandler","confirm","_callee","_this$state","data","regeneratorRuntime","wrap","_context","prev","next","_Components_Toast__WEBPACK_IMPORTED_MODULE_10__","warn","abrupt","_Api__WEBPACK_IMPORTED_MODULE_11__","accesstoken","props","sent","success","_Router_history__WEBPACK_IMPORTED_MODULE_12__","push","stop","this","_this$state2","react__WEBPACK_IMPORTED_MODULE_7___default","a","createElement","className","onChange","map","item","key","type","placeholder","onClick","react__WEBPACK_IMPORTED_MODULE_7__"],"mappings":"8SAYqBA,UAJpBC,OAAAC,EAAA,EAAAD,CAAO,SAAAE,GAAM,OACZC,YAAaD,EAAOE,WAAWD,iBAEhCH,OAAAC,EAAA,EAAAD,sLAKCK,OACEC,UACIC,GAAI,MAAOC,KAAM,iBACjBD,GAAI,QAASC,KAAM,iBACnBD,GAAI,MAAOC,KAAM,iBACjBD,GAAI,MAAOC,KAAM,mCAErBC,IAAK,GACLC,MAAO,GACPC,QAAS,MAOXC,WAAa,SAACC,GACZC,EAAKC,UACHN,IAAKI,EAAEG,OAAOC,WAGlBC,aAAe,SAACL,GACdC,EAAKC,UACHL,MAAOG,EAAEG,OAAOC,WAGpBE,eAAiB,SAACN,GAChBC,EAAKC,UACHJ,QAASE,EAAEG,OAAOC,WAGtBG,oCAAU,SAAAC,IAAA,IAAAC,EAAAb,EAAAC,EAAAC,EAAAY,EAAA,OAAAC,mBAAAC,KAAA,SAAAC,GAAA,cAAAA,EAAAC,KAAAD,EAAAE,MAAA,UAAAN,EAKJR,EAAKT,MAHPI,EAFMa,EAENb,IACAC,EAHMY,EAGNZ,MACAC,EAJMW,EAINX,QAEGF,EANG,CAAAiB,EAAAE,KAAA,eAONC,EAAA,EAAQC,KAAK,kCAPPJ,EAAAK,OAAA,oBAUHrB,EAVG,CAAAgB,EAAAE,KAAA,eAWNC,EAAA,EAAQC,KAAK,kCAXPJ,EAAAK,OAAA,oBAcHpB,EAdG,CAAAe,EAAAE,KAAA,gBAeNC,EAAA,EAAQC,KAAK,kCAfPJ,EAAAK,OAAA,yBAAAL,EAAAE,KAAA,GAkBW5B,OAAAgC,EAAA,EAAAhC,CAAK,eACtBiC,YAAanB,EAAKoB,MAAM/B,YACxBO,MAAOA,EACPD,IAAKA,EACLE,QAASA,IAtBH,SAkBFY,EAlBEG,EAAAS,OAwBIZ,EAAKa,SACfC,EAAA,EAAQC,KAAK,KAzBP,yBAAAZ,EAAAa,SAAAlB,EAAAmB,4EAnBHA,KAAKN,MAAM/B,aACdkC,EAAA,EAAQC,KAAK,2CA8CR,IAAAG,EAMHD,KAAKnC,MAJPC,EAFKmC,EAELnC,QACAG,EAHKgC,EAGLhC,IACAC,EAJK+B,EAIL/B,MACAC,EALK8B,EAKL9B,QAEF,OACE+B,EAAAC,EAAAC,cAAA,WAASC,UAAU,kBACjBH,EAAAC,EAAAC,cAAA,OAAKC,UAAU,6BACbH,EAAAC,EAAAC,cAAA,OAAKC,UAAU,qBAAf,kCACAH,EAAAC,EAAAC,cAAA,OAAKC,UAAU,6BACbH,EAAAC,EAAAC,cAAA,UAAQE,SAAUN,KAAK5B,WAAYK,MAAOR,GACxCiC,EAAAC,EAAAC,cAAA,UAAQ3B,MAAO,GAAf,sBAEEX,EAAQyC,IAAI,SAAAC,GAAI,OACdN,EAAAC,EAAAC,cAAA,UACEK,IAAKD,EAAKzC,GACVU,MAAO+B,EAAKzC,IAEXyC,EAAKxC,WAOlBkC,EAAAC,EAAAC,cAAA,OAAKC,UAAU,6BACbH,EAAAC,EAAAC,cAAA,OAAKC,UAAU,qBAAf,sBACAH,EAAAC,EAAAC,cAAA,OAAKC,UAAU,6BACbH,EAAAC,EAAAC,cAAA,SACEM,KAAK,OACLC,YAAY,iCACZL,SAAUN,KAAKtB,aACfD,MAAOP,MAIbgC,EAAAC,EAAAC,cAAA,OAAKC,UAAU,6BACbH,EAAAC,EAAAC,cAAA,OAAKC,UAAU,qBAAf,sBACAH,EAAAC,EAAAC,cAAA,OAAKC,UAAU,6BACbH,EAAAC,EAAAC,cAAA,YACEM,KAAK,OACLC,YAAY,iCACZL,SAAUN,KAAKrB,eACfF,MAAON,MAIb+B,EAAAC,EAAAC,cAAA,UAAQC,UAAU,6BAA6BO,QAASZ,KAAKpB,SAA7D,wBAhH2BiC,EAAA","file":"static/js/write.9929b6d3.js","sourcesContent":["import React, { Component } from 'react';\nimport { observer, inject } from 'mobx-react';\nimport PropTypes from 'prop-types';\nimport message from '../../Components/Toast';\nimport apis from '../../Api';\nimport history from '../../Router/history';\nimport './index.less';\n\n@inject(stores => ({\n  accessToken: stores.loginStore.accessToken,\n}))\n@observer\nexport default class Write extends Component {\n  static propTypes = {\n    accessToken: PropTypes.string.isRequired,\n  }\n  state = {\n    tabList: [\n      { id: 'ask', desc: '问答' },\n      { id: 'share', desc: '分享' },\n      { id: 'job', desc: '招聘' },\n      { id: 'dev', desc: '客户端测试' },\n    ],\n    tab: '',\n    title: '',\n    content: '',\n  }\n  componentDidMount() {\n    if (!this.props.accessToken) {\n      history.push('/login');\n    }\n  }\n  tabHandler = (e) => {\n    this.setState({\n      tab: e.target.value,\n    });\n  }\n  titleHandler = (e) => {\n    this.setState({\n      title: e.target.value,\n    });\n  }\n  contentHandler = (e) => {\n    this.setState({\n      content: e.target.value,\n    });\n  }\n  confirm = async () => {\n    const {\n      tab,\n      title,\n      content,\n    } = this.state;\n    if (!tab) {\n      message.warn('请选择模块');\n      return;\n    }\n    if (!title) {\n      message.warn('请输入标题');\n      return;\n    }\n    if (!content) {\n      message.warn('请输入内容');\n      return;\n    }\n    const data = await apis('createTopic', {\n      accesstoken: this.props.accessToken,\n      title: title,\n      tab: tab,\n      content: content,\n    });\n    if (data && data.success) {\n      history.push('/');\n    }\n  }\n  render() {\n    const {\n      tabList,\n      tab,\n      title,\n      content,\n    } = this.state;\n    return (\n      <section className=\"write clearfix\">\n        <div className=\"write__cont flex flex-v-c\">\n          <div className=\"write__cont__left\">选择模块：</div>\n          <div className=\"write__cont__right flex-1\">\n            <select onChange={this.tabHandler} value={tab}>\n              <option value={0}>请选择</option>\n              {\n                tabList.map(item => (\n                  <option\n                    key={item.id}\n                    value={item.id}\n                  >\n                    {item.desc}\n                  </option>\n                ))\n              }\n            </select>\n          </div>\n        </div>\n        <div className=\"write__cont flex flex-v-c\">\n          <div className=\"write__cont__left\">标题：</div>\n          <div className=\"write__cont__right flex-1\">\n            <input\n              type=\"text\"\n              placeholder=\"请输入标题\"\n              onChange={this.titleHandler}\n              value={title}\n            />\n          </div>\n        </div>\n        <div className=\"write__cont flex flex-v-c\">\n          <div className=\"write__cont__left\">内容：</div>\n          <div className=\"write__cont__right flex-1\">\n            <textarea\n              type=\"text\"\n              placeholder=\"请输入内容\"\n              onChange={this.contentHandler}\n              value={content}\n            />\n          </div>\n        </div>\n        <button className=\"write__confirm float-right\" onClick={this.confirm}>提交</button>\n      </section>\n    );\n  }\n}\n"],"sourceRoot":""}